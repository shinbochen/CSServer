// ClientData.cpp: implementation of the CClientDataSocket class.
//
//////////////////////////////////////////////////////////////////////

#include "stdafx.h"
#include "CSServer.h"
#include "ClientData.h"
#include "..\public\ServerSocket.h"

#ifdef _DEBUG
#undef THIS_FILE
static char THIS_FILE[]=__FILE__;
#define new DEBUG_NEW
#endif

//////////////////////////////////////////////////////////////////////
// Construction/Destruction
//////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////
// CTerminal Class
//////////////////////////////////////////////////////////////////////
// Construction/Destruction
//////////////////////////////////////////////////////////////////////
//
CClientData::CClientData(){
	
	m_strUser=" ";
	m_pClientSocket = NULL;
	m_bLoginSuccess = FALSE;
}
//////////////////////////////////////////////////////////////////////
//
CClientData::~CClientData(){
	FreeMemory( );		
}

//////////////////////////////////////////////////////////////////////
//
void CClientData::FreeMemory(){
	StopSocket( );
}

//////////////////////////////////////////////////////////////////////
//
void CClientData::StopSocket( void ){

	if( m_pClientSocket ){
	
		try{
			TRACE( "CClientData::StopSocket\r\n" );
			m_pClientSocket->ShutDown(2);
			m_pClientSocket->Close( );
			delete m_pClientSocket;
			m_pClientSocket = NULL;
		}
		catch(...){
			return;
		}
	}	
}
